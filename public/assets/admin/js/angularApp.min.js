var app=angular.module("myApp",["ngRoute","ui.bootstrap","angularUtils.directives.dirPagination"]);app.config(function(e){e.when("/employees",{templateUrl:"employees",controller:"employeeController"}).when("/portfolio",{templateUrl:"portfolio",controller:"portfolioController"}).when("/testimonial",{templateUrl:"testimonial",controller:"testimonialController"}).when("/gallery",{templateUrl:"gallery",controller:"GalleryController"})}),app.filter("startFrom",function(){return function(e,n){return n=+n,e.slice(n)}}),app.directive("ngFileModel",["$parse",function(e){return{restrict:"A",link:function(n,o,t){var r=e(t.ngFileModel),i=t.multiple,a=r.assign;o.bind("change",function(){var e=[];console.log(o[0].files),angular.forEach(o[0].files,function(n){var o={name:n.name,size:n.size,url:URL.createObjectURL(n),_file:n};e.push(o)}),n.$apply(function(){i?a(n,e):a(n,e[0])})})}}}]),app.directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(n,o,t){var r=e(t.fileModel),i=r.assign;n.filespre=[],o.bind("change",function(){angular.forEach(o[0].files,function(e){e.url=URL.createObjectURL(e),e.model=t.fileModel,n.filespre.push(e)}),n.$apply(function(){i(n,o[0].files)})})}}}]),app.service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(n,o,t){var r=new FormData,i=0;return angular.forEach(n,function(e){r.append(i,e),i++}),r.append("name",t),e.post(o,r,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}})}}]),app.service("action",["$http",function(e){this.post=function(n,o){return e({method:"post",url:o,data:n,header:{"Content-type":"application/x-www-form-urlencoded"}})}}]),app.directive("startslider",function(){return{restrict:"A",replace:!1,template:'<ul class="bxslider"><li ng-repeat="picture in portfolioitem.files"><img ng-src="{{picture.src}}" alt="" /></li></ul>',link:function(e,n,o){n.ready(function(){$("."+$(n[0]).attr("class")).bxSlider({mode:"fade",auto:!0,autoControls:!0,slideHeight:386})})}}}),app.directive("ngConfirmClick",[function(){return{link:function(e,n,o){var t=o.ngConfirmClick||"Are you sure?",r=o.confirmedClick;n.bind("click",function(n){window.confirm(t)&&e.$eval(r)})}}}]),function(){function e(e,n,o){function t(t,u){var g=u.dirPaginate,f=g.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),d=/\|\s*itemsPerPage\s*:\s*(.*\(\s*\w*\)|([^\)]*?(?=\s+as\s+))|[^\)]*)/;if(null===f[2].match(d))throw"pagination directive: the 'itemsPerPage' filter must be set.";var p=f[2].replace(d,""),m=n(p);a(t);var h=u.paginationId||c;return o.registerInstance(h),function(t,a,u){var f=n(u.paginationId)(t)||u.paginationId||c;o.registerInstance(f);var d=r(g,f);i(a,u,d),l(a);var p=e(a),h=s(t,u,f);o.setCurrentPageParser(f,h,t),"undefined"!=typeof u.totalItems?(o.setAsyncModeTrue(f),t.$watch(function(){return n(u.totalItems)(t)},function(e){0<=e&&o.setCollectionLength(f,e)})):(o.setAsyncModeFalse(f),t.$watchCollection(function(){return m(t)},function(e){if(e){var n=e instanceof Array?e.length:Object.keys(e).length;o.setCollectionLength(f,n)}})),p(t)}}function r(e,n){var o,t=!!e.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return o=n===c||t?e:e.replace(/(\|\s*itemsPerPage\s*:\s*[^|\s]*)/,"$1 : '"+n+"'")}function i(e,n,o){e[0].hasAttribute("dir-paginate-start")||e[0].hasAttribute("data-dir-paginate-start")?(n.$set("ngRepeatStart",o),e.eq(e.length-1).attr("ng-repeat-end",!0)):n.$set("ngRepeat",o)}function a(e){angular.forEach(e,function(e){1===e.nodeType&&angular.element(e).attr("dir-paginate-no-compile",!0)})}function l(e){angular.forEach(e,function(e){1===e.nodeType&&angular.element(e).removeAttr("dir-paginate-no-compile")}),e.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate"),e.eq(e.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}function s(e,o,t){var r;if(o.currentPage)r=n(o.currentPage);else{var i=(t+"__currentPage").replace(/\W/g,"_");e[i]=1,r=n(i)}return r}return{terminal:!0,multiElement:!0,priority:100,compile:t}}function n(){return{priority:5e3,terminal:!0}}function o(e){e.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' || ( ! autoHide && pages.length === 1 ) }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}function t(e,n){function o(n,o,r){function a(o){if(e.isRegistered(f)&&u(o)){var r=n.pagination.current;n.pages=t(o,e.getCollectionLength(f),e.getItemsPerPage(f),p),n.pagination.current=o,s(),n.onPageChange&&n.onPageChange({newPageNumber:o,oldPageNumber:r})}}function l(){if(e.isRegistered(f)){var o=parseInt(e.getCurrentPage(f))||1;n.pages=t(o,e.getCollectionLength(f),e.getItemsPerPage(f),p),n.pagination.current=o,n.pagination.last=n.pages[n.pages.length-1],n.pagination.last<n.pagination.current?n.setCurrent(n.pagination.last):s()}}function s(){if(e.isRegistered(f)){var o=e.getCurrentPage(f),t=e.getItemsPerPage(f),r=e.getCollectionLength(f);n.range.lower=(o-1)*t+1,n.range.upper=Math.min(o*t,r),n.range.total=r}}function u(e){return i.test(e)&&0<e&&e<=n.pagination.last}var g=r.paginationId||c,f=n.paginationId||r.paginationId||c;if(!e.isRegistered(f)&&!e.isRegistered(g)){var d=f!==c?" (id: "+f+") ":" ";window.console&&console.warn("Pagination directive: the pagination controls"+d+"cannot be used without the corresponding pagination directive, which was not found at link time.")}n.maxSize||(n.maxSize=9),n.autoHide=void 0===n.autoHide||n.autoHide,n.directionLinks=!angular.isDefined(r.directionLinks)||n.$parent.$eval(r.directionLinks),n.boundaryLinks=!!angular.isDefined(r.boundaryLinks)&&n.$parent.$eval(r.boundaryLinks);var p=Math.max(n.maxSize,5);n.pages=[],n.pagination={last:1,current:1},n.range={lower:1,upper:1,total:1},n.$watch("maxSize",function(e){e&&(p=Math.max(n.maxSize,5),l())}),n.$watch(function(){if(e.isRegistered(f))return(e.getCollectionLength(f)+1)*e.getItemsPerPage(f)},function(e){0<e&&l()}),n.$watch(function(){if(e.isRegistered(f))return e.getItemsPerPage(f)},function(e,o){e!=o&&"undefined"!=typeof o&&a(n.pagination.current)}),n.$watch(function(){if(e.isRegistered(f))return e.getCurrentPage(f)},function(e,n){e!=n&&a(e)}),n.setCurrent=function(n){e.isRegistered(f)&&u(n)&&(n=parseInt(n,10),e.setCurrentPage(f,n))},n.tracker=function(e,n){return e+"_"+n}}function t(e,n,o,t){var i,a=[],l=Math.ceil(n/o),s=Math.ceil(t/2);i=e<=s?"start":l-s<e?"end":"middle";for(var c=t<l,u=1;u<=l&&u<=t;){var g=r(u,e,t,l),f=2===u&&("middle"===i||"end"===i),d=u===t-1&&("middle"===i||"start"===i);c&&(f||d)?a.push("..."):a.push(g),u++}return a}function r(e,n,o,t){var r=Math.ceil(o/2);return e===o?t:1===e?e:o<t?t-r<n?t-o+e:r<n?n-r+e:e:e}var i=/^\d+$/,a={restrict:"AE",scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?",autoHide:"=?"},link:o},l=n.getString();return void 0!==l?a.template=l:a.templateUrl=function(e,o){return o.templateUrl||n.getPath()},a}function r(e){return function(n,o,t){if("undefined"==typeof t&&(t=c),!e.isRegistered(t))throw"pagination directive: the itemsPerPage id argument (id: "+t+") does not match a registered pagination-id.";var r,a;if(angular.isObject(n)){if(o=parseInt(o)||9999999999,a=e.isAsyncMode(t)?0:(e.getCurrentPage(t)-1)*o,r=a+o,e.setItemsPerPage(t,o),n instanceof Array)return n.slice(a,r);var l={};return angular.forEach(i(n).slice(a,r),function(e){l[e]=n[e]}),l}return n}}function i(e){if(Object.keys)return Object.keys(e);var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push(o);return n}function a(){var e,n={};this.registerInstance=function(o){"undefined"==typeof n[o]&&(n[o]={asyncMode:!1},e=o)},this.deregisterInstance=function(e){delete n[e]},this.isRegistered=function(e){return"undefined"!=typeof n[e]},this.getLastInstanceId=function(){return e},this.setCurrentPageParser=function(e,o,t){n[e].currentPageParser=o,n[e].context=t},this.setCurrentPage=function(e,o){n[e].currentPageParser.assign(n[e].context,o)},this.getCurrentPage=function(e){var o=n[e].currentPageParser;return o?o(n[e].context):1},this.setItemsPerPage=function(e,o){n[e].itemsPerPage=o},this.getItemsPerPage=function(e){return n[e].itemsPerPage},this.setCollectionLength=function(e,o){n[e].collectionLength=o},this.getCollectionLength=function(e){return n[e].collectionLength},this.setAsyncModeTrue=function(e){n[e].asyncMode=!0},this.setAsyncModeFalse=function(e){n[e].asyncMode=!1},this.isAsyncMode=function(e){return n[e].asyncMode}}function l(){var e,n="angularUtils.directives.dirPagination.template";this.setPath=function(e){n=e},this.setString=function(n){e=n},this.$get=function(){return{getPath:function(){return n},getString:function(){return e}}}}var s="angularUtils.directives.dirPagination",c="__default";angular.module(s,[]).directive("dirPaginate",["$compile","$parse","paginationService",e]).directive("dirPaginateNoCompile",n).directive("dirPaginationControls",["paginationService","paginationTemplate",t]).filter("itemsPerPage",["paginationService",r]).service("paginationService",a).provider("paginationTemplate",l).run(["$templateCache",o])}(),app.controller("adminController",function(e,n,o,t,r,i){e.employees=[],e.error={};var a=e.baseUrl=n.protocol()+"://"+location.host;t.base_url=a,t.public_url=e.baseUrl=n.protocol()+"://"+location.host,e.regex=RegExp("^((https?|ftp)://)?([a-z]+[.])?[a-z0-9-]+([.][a-z]{1,4}){1,2}(/.*[?].*)?$","i"),e.paginations=[5,10,20,25],e.numPerPage=5,e.format="yyyy/MM/dd",e.user={},e.login=function(){console.log("login");var n=new FormData;angular.forEach(e.user,function(e,o){n.append(o,e)});var r=t.base_url+"/login/verify";o.post(r,n,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).success(function(e,n,o){i.location.href="/admin/#"}).error(function(n,o,t){console.log("login error"),console.log(n),e.showerror=!0})}}),app.controller("GalleryController",function(e,n,o,t,r){function i(){o.get(n.base_url+"/admin/gallery/get-all").then(function(n){n.data?(e.galleries=n.data,console.log(e.galleries)):(console.log("No data found"),e.message="No data found")})}e.galleries=[],e.newgallery={},e.curgallery={},e.galleryfiles={},e.files=[],e.item_files={},e.message={},e.show_error=!1,e.error=[],e.showform=!1,i(),e.showForm=function(n){e.showform=!0,e.curgallery=n,e.newgallery=angular.copy(n),e.item_files=n.files},e.hideForm=function(){e.showform=!1},e.newGallery=function(){e.newgallery={},e.showform=!0},e.addGallery=function(){var t=new FormData;if(angular.forEach(e.newgallery,function(e,n){t.append(n,e)}),angular.forEach(e.files.image,function(e,n){t.append("files[]",e)}),e.newgallery.id){console.log("edit");var r=n.base_url+"/admin/gallery/edit/"+e.newgallery.id;o.post(r,t,{transformRequest:angular.identity,headers:{"Content-type":void 0,"Process-Data":!1}}).success(function(n,o,t){console.log("edit success"),void 0!=n.error&&(e.show_error=!0,e.error=n.error),i(),console.log(e.error),e.showform=!1,angular.element("input[type='file']").val(null),e.item_files=[],e.filespre=[]}).error(function(e,n,o){console.log("edit error"),console.log(e)})}else{console.log(e.newgallery),console.log(e.files.image);var r=n.base_url+"/admin/gallery/add";o.post(r,t,{transformRequest:angular.identity,headers:{"Content-type":void 0,"Process-Data":!1}}).success(function(n,o,t){console.log("add success"),void 0!=n.error&&(e.show_error=!0,e.error=n.error),i(),e.showform=!1,angular.element("input[type='file']").val(null),e.item_files=[],e.filespre=[],console.log(e.error)}).error(function(e,n,o){console.log("add error"),console.log(e)})}},e.showGalleryFiles=function(n){console.log(n),e.galleryfiles=n},e.deleteImage=function(o){console.log(o);var r=n.base_url+"/admin/gallery/delete-image",i=o;t.post(i,r).success(function(n,t,r){console.log("image deleted"),console.log(n);var i=e.item_files.indexOf(o);e.item_files.splice(i,1),console.log(e.item_files)}).error(function(e,n,o){console.log("delete image error"),console.log(e)})},e.deleteGallery=function(o){var r=n.base_url+"/admin/gallery/delete";t.post(o,r).success(function(n,t,r){console.log("gallery deleted");var i=e.galleries.indexOf(o);e.galleries.splice(i,1)}).error(function(e,n,o){console.log("delete error"),console.log(e)})}}),app.controller("portfolioController",function(e,n,o,t,r,i,a){function l(){o.get(t.base_url+"/admin/portfolio/get-all").then(function(n){n.data?(e.showtable=!0,e.portfolios=n.data,console.log(e.portfolios)):(console.log("No data found"),e.showtable=!1,e.message="No data Found")})}e.newportfolio={},e.portfolios=[],e.curportfolio={},e.message={},e.error={},e.showform=!1,e.showtable=!0,e.files=[],e.loading=!1,e.item_files=[],e.show_error=!1,l(),e.showForm=function(n){e.showform=!0,e.show_error=!1,e.curportfolio=n,e.newportfolio=angular.copy(n),angular.element("input[type='file']").val(null),e.filespre=[],e.item_files=n.files,console.log(e.item_files)},e.hideForm=function(){e.showform=!1},e.newPortfolio=function(){e.newportfolio={},e.showform=!0,angular.element("input[type='file']").val(null),e.filespre=[]},e.addPortfolio=function(){e.loading=!0;e.files.desktop,e.files.mobile;if(void 0!=e.newportfolio.link){var n=e.newportfolio.link;~n.indexOf("http")||(e.newportfolio.link="http://"+n)}e.newportfolio.date=r("date")(Date.parse(e.newportfolio.date),"yyyy-MM-dd");var i=new FormData;if(angular.forEach(e.newportfolio,function(e,n){i.append(n,e)}),angular.forEach(e.files.desktop,function(e,n){i.append("desktop[]",e)}),angular.forEach(e.files.mobile,function(e,n){i.append("mobile[]",e)}),void 0!=e.newportfolio.id){console.log("edit");var a=t.base_url+"/admin/portfolio/edit/"+e.newportfolio.id;o.post(a,i,{transformRequest:angular.identity,headers:{"Content-type":void 0,"Process-Data":!1}}).success(function(n,o,t){console.log("edit succes"),console.log(n),void 0!=n.error&&(e.show_error=!0,e.error=n.error),l(),e.showform=!1,angular.element("input[type='file']").val(null),e.item_files=[],e.filespre=[]}).error(function(n,o,t){console.log("edit error"),console.log(n),void 0!=n.error&&(e.show_error=!0,e.error=n.error),l(),angular.element("input[type='file']").val(null),e.item_files=[],e.filespre=[]})}else{console.log("add");var a=t.base_url+"/admin/portfolio/add";o.post(a,i,{transformRequest:angular.identity,headers:{"Content-type":void 0,"Process-Data":!1}}).success(function(n,o,t){console.log("add succes"),console.log(n),void 0!=n.error&&(e.show_error=!0,e.error=n.error),l(),e.showform=!1,angular.element("input[type='file']").val(null),e.item_files=[],e.filespre=[]}).error(function(n,o,t){console.log("add error"),console.log(n),void 0!=n.error&&(e.show_error=!0,e.error=n.error),l(),angular.element("input[type='file']").val(null),e.item_files=[],e.filespre=[]})}},e.deletePortfolio=function(e){var n=e.id;o.delete(t.base_url+"/admin/portfolio/delete/"+n).success(function(e,n,o){console.log(e),alert(e),l()})},e.deleteImage=function(n){var o=t.base_url+"/admin/portfolio/delete-image",r=n;a.post(r,o).success(function(o,t,r){console.log("portfolio file deleted");var i=e.item_files.indexOf(n);e.item_files.splice(i,1)}).error(function(e,n,o){console.log("portfolio file delete error")})}}),app.controller("testimonialController",function(e,n,o,t){function r(){n.get(o.base_url+"/Testimonial_Controller/get_all").then(function(n){n.data?(e.testimonials=n.data,e.showtable=!0,console.log(e.testimonials)):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.testimonials=[],e.newtestimonial={},e.curtestimonial={},e.files=[],e.showform=!1,e.loading=!1,e.message={},r(),e.newTestimonial=function(){e.newtestimonial={},angular.element("input[type='file']").val(null),e.filespre=[],e.showform=!0},e.showForm=function(n){console.log(n),e.showform=!0,e.curtestimonial=n,angular.element("input[type='file']").val(null),e.newtestimonial=angular.copy(n),e.filespre=[]},e.hideForm=function(){e.showform=!1},e.addTestimonial=function(){if(void 0!=e.newtestimonial.link){var t=e.newtestimonial.link;~t.indexOf("http")||(e.newtestimonial.link="http://"+t)}var i=new FormData,a=0;if(angular.forEach(e.newtestimonial,function(e,n){i.append(n,e)}),angular.forEach(e.files.photo,function(e,n){i.append("photo",e),a++}),e.newtestimonial.id){console.log("edit"),console.log(e.newtestimonial);var l=o.base_url+"/admin/testimonial/edit/"+e.newtestimonial.id;n.post(l,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).success(function(n,o,t){console.log("test add success"),console.log(n),e.testimonials.push(n),r(),e.newtestimonial={},e.showform=!1}).error(function(e,n,o){console.log("test add error"),console.log(e)})}else{console.log("add"),console.log(e.newtestimonial);var l=o.base_url+"/admin/testimonial/add";n.post(l,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).success(function(n,o,t){console.log("test add success"),e.testimonials.push(n),r(),e.newtestimonial={},e.showform=!1}).error(function(e,n,o){console.log("test add error"),console.log(e)})}},e.deleteTestimonial=function(n){var i=n.id,a=o.base_url+"/admin/testimonial/delete/"+i,l=n;t.post(l,a).success(function(o,t,i){console.log("deleted");var a=e.testimonials.indexOf(n);e.testimonials.splice(a,1),alert(o),r()}).error(function(e,n,o){console.log("delete error"),console.log(e)})}}),app.controller("employeeController",function(e,n,o,t,r,i){function a(){o.get(t.base_url+"/admin/employee").then(function(n){n.data?(e.employees=n.data,e.showtable=!0):(console.log("No data found!"),e.showtable=!1,e.message="No Data Found")})}e.newemployee={},e.employees=[],e.curemploye=[],e.files=[],e.showform=!1,e.loading=!1,e.message={},e.filespre=[],a(),e.showForm=function(n){console.log(n),e.showform=!0,e.curemploye=n,e.newemployee=angular.copy(n),angular.element("input[type='file']").val(null),e.filespre=[]},e.hideForm=function(){e.showform=!1},e.newEmployee=function(){e.newemployee={},e.showform=!0,angular.element("input[type='file']").val(null),e.filespre=[]},e.addEmployee=function(){if(void 0!=e.newemployee.linkedin){var n=e.newemployee.linkedin;~n.indexOf("http")||(e.newemployee.linkedin="http://"+n)}if(void 0!=e.newemployee.facebook){var n=e.newemployee.facebook;~n.indexOf("http")||(e.newemployee.facebook="http://"+n)}if(void 0!=e.newemployee.twitter){var n=e.newemployee.twitter;~n.indexOf("http")||(e.newemployee.twitter="http://"+n)}if(void 0!=e.newemployee.googleplus){var n=e.newemployee.googleplus;~n.indexOf("http")||(e.newemployee.googleplus="http://"+n)}if(void 0!=e.newemployee.github){var n=e.newemployee.github;~n.indexOf("http")||(e.newemployee.github="http://"+n)}var r=new FormData,i=0;if(angular.forEach(e.newemployee,function(e,n){r.append(n,e)}),angular.forEach(e.files.photo,function(e,n){r.append("photo",e),i++}),e.newemployee.id){console.log("edit");var l=t.base_url+"/admin/employee/edit/"+e.newemployee.id;o.post(l,r,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).success(function(n,o,t){e.newemployee={},e.showform=!1}).error(function(e,n,o){console.log(e)})}else{var l=t.base_url+"/admin/employee/add";o.post(l,r,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).success(function(n,o,t){console.log(n),e.employees.push(n),a(),e.newemployee={},e.showform=!1,e.filespre=[]}).error(function(e,n,o){console.log(e)})}},e.deleteEmployee=function(n){console.log(n);var o=n.id,r=t.base_url+"/admin/employee/delete/"+o,l=n;i.post(l,r).success(function(o,t,r){console.log("deleted");var i=e.employees.indexOf(n);e.employees.splice(i,1),alert(o),a()}).error(function(e,n,o){console.log("delete error"),console.log(e)})}}),app.controller("teamController",function(e,n,o,t){function r(){o.get(n.base_url+"/load_team").then(function(n){n.data?(e.teams=n.data,console.log(e.teams)):(e.message="No data Found",console.log("No data Found"))})}e.teams=[],n.base_url=e.baseUrl=t.protocol()+"://"+location.host,r()});